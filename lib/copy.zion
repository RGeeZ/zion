export {Deepcopy, deepcopy}

link in "bdw-gc"

class Copy a {
    fn copy(a) a
    default {
      copy = deepcopy
    }
}

class Deepcopy a {
    fn deepcopy(a) a
}

instance Deepcopy String {
    fn deepcopy(s) {
        let String(sz, cb) = s
        return String(__builtin_ffi_2("GC_strndup", sz, cb), cb)
    }
}
