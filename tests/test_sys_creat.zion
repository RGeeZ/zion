# test: skip

import sys {unlink, open, write, close, O_CREAT, O_WRONLY, S_IRUSR, S_IWUSR, CreateMode}

fn main() {
    let filename = "/var/tmp/junk.testfile"
    let _ = unlink(filename)
    let fd = open(filename,
        O_CREAT|O_WRONLY, S_IRUSR|S_IWUSR)
    if fd < 0 {
        let _ = __builtin_ffi_1("perror", "open") as Int
        return
    }
    let String(buf, len) = "test"
    let s = write(fd, buf, len)
    let q = close(fd)
    print("PASS")
}
