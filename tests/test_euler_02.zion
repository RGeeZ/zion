module _
link module sys
link module math
link module posix
# test: pass
# expect: 29

def foo() bool
	return true

def main()
	var primes [int]
	i := 1
	var x bool = true
	target := len(sys.args) == 2 and int(sys.args[1]) or 30
	while i <= target
		if is_prime(i)
			append(primes, i)
		i += 1
	print(primes)

def is_prime(i int) bool
	# get the max we need to search
	j := math.min(i, int(math.sqrt(float(i)) + 1))
	k := 2
	while k < j
		if i % k == 0
			return false
		k += 1

	return true
