module _
# test: pass
# expect: pass

get argparse {parse, Option, None}

fn main() {
    let options [str: argparse.Option]
    options["-t"] = Option("test", true, true)
    parser := Parser("Test parser", options, None)
    with arguments := parse(parser, ["-t", "pass"]) {
        print(match arguments.options["test"] {
            Just(value) => value
            Nothing => return
        })
    } else parse_error {
        print(parse_error.reason)
        parse_error.usage()
    }
}
