module eightq @1.0
link module math

type Pos has
	var x int
	var y int

def attack(pos1 any, pos2 any) bool
	return (
		(pos1.x == pos2.x) or
 		(pos1.y == pos2.y) or
 		math.abs(pos1.x - pos2.x) == math.abs(pos1.y - pos2.y))

def safe(square Pos, queens solutions)
	i := 0
	while i < len(queens)
		if attack(square, queens[i])
			return false
		i += 1

	return true

def solve(n int, NQUEENS int)
	if n == 0
		# error: 26:11.*not impl
		return [[]]

	smaller_solutions := eightq.solve(n - 1, NQUEENS)

	solutions := []
	i := 0
	j := 0
	while i < NQUEENS
		j = 0
		while j < len(smaller_solutions)
			if eightq.safe([n, i + 1], smaller_solutions[j])
				solutions += [smaller_solutions[j] + [[n, i + 1]]]
			j = j + 1
		i = i + 1

	return solutions

def main(NQUEENS int) void
	return eightq.solve(NQUEENS, NQUEENS)
