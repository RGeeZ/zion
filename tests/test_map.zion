module _
# test: pass
# expect: 12
# expect: 13
# expect: deleted hello
# expect: 15
# expect: could not find hello

def main()
	var m {str: int?}

	m["hello"] = Just(12)
	when get(m, "hello", Just(0)) is
		Just(x)
			print(x)
		Empty
			print(0)
	m["hello"] = Just(13)
	when m["hello"] is
		Just(Just(x))
			print(x)
		Just(Empty)
			pass
		Empty
			pass

	if del(m, "hello")
		print("deleted hello")
