module _
link module file
# test: pass
# expect: This text should appear

def main() __int__
	if f := file.open("play/read_file.zion", file.ReadOnly)
		while true
			buffer := file.read(f, 4 * 1024)
			when buffer
				is std/bytes
					posix.write(1r, buffer.data, buffer.cb)
				is file/EOF
					break
				is file/ReadError
					print("Read Error")
					return -1r
	return 0r
